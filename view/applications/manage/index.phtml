<?php 
/**
 * YAWIK
 *
 * @filesource
 * @copyright (c) 2013-2104 Cross Solution (http://cross-solution.de)
 * @license   AGPLv3
 */
if ($this->job):        $subTitle = sprintf($this->translate('for the job "%s"'), $this->job->title);
elseif ($this->byJobs): $subTitle = $this->translate('to all of your jobs');
else:                   $subTitle = false;
endif;

$this->headTitle($this->translate('Applications') . ($subTitle ? ' ('. $subTitle . ')' : ''));

$this->headScript()->appendFile($this->basePath('js/bloodhound.js'))
                   ->appendFile($this->basePath('js/typeahead.jquery.js'))
                   ->appendFile($this->basePath('/Core/js/core.js'))
                   ->appendFile($this->basePath('/Core/js/multiCheckbox.js'));
$this->headScript()->appendFile($this->basepath('/Core/js/core.pagination.js'));
$this->headScript()->appendFile($this->basePath('Applications/js/applications.index.js'));

$this->headScript()->captureStart();
print <<<HEADSCRIPT
(function ($) {
    $('document').ready(function() {

    //$('#apps-modal').modal({'show': false});
$('#apps-modal').modal('show');
// this is for Bootstrap 3.1
//$('#apps-modal').modal({'show': false});
$('#apps-modal').modal('hide');

    });
}) (jQuery);
HEADSCRIPT;
$this->headScript()->captureEnd();

?>      
<h1>
  <?=$this->translate('List of all applications')?>
  <? if ($subTitle): ?>
    <small><?php echo $subTitle ?></small>
  <?php endif;?>
</h1>

<div id="apps-modal" class="modal fade in" style="" aria-hidden="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                header ...
            </div>
            <div class="modal-body">
                body ...
            </div>
            <div class="modal-footer">
                <button id="modal-submit" class="btn btn-primary"><? echo $this->translate('submit'); ?></button>
                <button data-dismiss="modal" class="btn btn-default" type="button"><? echo $this->translate('cancel'); ?></button>
            </div>
        </div>
    </div>
</div>


<div class="container col-md-12">
<nav class="navbar cam-toolbar"> 
    <form id="search-applications-form" class="form-inline" action="<?php echo $this->basePath('/de/applications')?>" method="get">          
      <div id="search-applications form-group has-feedback" class="row">
        <input class="form-control" id="search-applications-input" 
               placeholder="<?php echo $this->translate('search applications')?> ..." 
               name="search" 
               type="text"
               <?php if ($this->search): ?>value="<?php echo $this->search ?>" <?php endif ?>>
               
        <input class="form-control" type="text" id="job-filter" name="job_title" placeholder="<?php echo $this->translate('Enter job title')?> ..."
        <?php if ($this->job): ?> value="[<?php echo $this->job->applyId ?>] <?php echo $this->job->title ?>"<?php endif ?>>
        <input id="job-filter-value" type="hidden" name="job" <?php if ($this->job):?> value="<?php echo $this->job->id ?>"<?php endif?>>
        <button class="btn btn-primary" type="submit"><?php echo $this->translate('Search')?></button>
        <a href="<?php echo $this->url('lang/applications', array(), array('query' => array('clear' => 1)), true) ?>"
           class="btn btn-default"><?php echo $this->translate('Clear') ?></a>
      </div>
    </form>
  </nav>
</div>
<div class="pagination-container" data-uri="<?php echo $this->url('lang/applications', array(), 
                  array('query' => $this->params()->fromQuery()), true) ?>">
<?php echo $this->render('applications/manage/index.ajax.phtml') ?>
</div>